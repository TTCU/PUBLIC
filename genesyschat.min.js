/* TTCU Genesys chat bootstrap (Web Messenger), no Widgets Launcher */
(function(){if(window.__gcBoot)return;window.__gcBoot=1;function q(k,d,v){try{return new URLSearchParams(d).get(k)||v}catch(_){return v}}
var me=document.currentScript||function(){var a=document.getElementsByTagName("script");return a[a.length-1]}(),u=new URL(me.src),qs=u.search;
var ENV=q("env",qs,"prod-usw2"),DEP=q("dep",qs,""),HIDE=+q("hide",qs,"1"),WIRE=+q("wire",qs,"0"),BOOT=q("boot",qs,"https://apps.usw2.pure.cloud/genesys-bootstrap/genesys.min.js"),BTN=+q("btn",qs,"1"),POS=(q("pos",qs,"right")==="left"?"left":"right");
if(!DEP){console.error("genesyschat: missing dep");return}
function hideHeader(){if(!HIDE)return;try{var css=".cfm-chat-trigger,#orbital_chat,[data-orbital-chat-widget]{display:none!important}",st=document.createElement("style");st.textContent=css;document.head.appendChild(st)}catch(e){}}
function buildBtn(){if(!BTN||document.getElementById("ttcuGenesysBtn"))return;
  var b=document.createElement("button");b.id="ttcuGenesysBtn";b.type="button";b.setAttribute("aria-label","Open chat");
  b.style.cssText="position:fixed;bottom:16px;"+POS+":16px;width:56px;height:56px;border:0;border-radius:50%;box-shadow:0 12px 32px rgba(0,0,0,.22);background:#0f6cf2;color:#fff;z-index:2147483647;display:flex;align-items:center;justify-content:center;cursor:pointer";
  b.innerHTML='<svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20 2H4a2 2 0 0 0-2 2v18l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z"/></svg>';
  b.addEventListener("click",function(){try{Genesys("command","Messenger.open")}catch(e){}});
  document.body.appendChild(b)
}
function onReady(){hideHeader();buildBtn();if(WIRE){document.addEventListener("chat.desktop.clicked",function(){try{Genesys("command","Messenger.open")}catch(e){}})}}
function load(){if(window.Genesys&&typeof Genesys==="function"){try{Genesys("register");Genesys("subscribe","Messenger.ready",onReady);setTimeout(onReady,800)}catch(e){setTimeout(onReady,800)}return}
  window._genesysJs="Genesys";window.Genesys=window.Genesys||function(){(Genesys.q=Genesys.q||[]).push(arguments)};Genesys.t=+new Date;Genesys.c={environment:ENV,deploymentId:DEP};
  var z=document.createElement("script");z.async=1;z.src=BOOT;z.charset="utf-8";
  z.onload=function(){try{Genesys("register");Genesys("subscribe","Messenger.ready",onReady);setTimeout(onReady,800)}catch(e){setTimeout(onReady,800)}};
  document.head.appendChild(z)
}
document.readyState==="loading"?document.addEventListener("DOMContentLoaded",load):load()})();

!function(){"use strict";function e(e){return document.getElementById(e)}function t(){var e,t,n=document.currentScript||function(){var e=document.getElementsByTagName("script");return e[e.length-1]}(),o=(e=n&&n.src?new URL(n.src):null,t=e?new URLSearchParams(e.search):new URLSearchParams,{"url":t.get("u")||"https://example.com/chat","title":t.get("t")||"Web Chat","position":"left"===t.get("p")?"left":"right","width":+(t.get("w")||360),"height":+(t.get("h")||520),"maxWidth":+(t.get("mw")||420),"maxHeight":+(t.get("mh")||680),"zIndex":+(t.get("z")||2147483647),"launcher":"0"!==t.get("l"),"eager":"1"===t.get("e")});return Object.assign({},{},window.__ttcuChatConfig||{},o)}var n={built:!1,open:!1,url:""},o={title:"Web Chat",position:"right",width:360,height:520,maxWidth:420,maxHeight:680,zIndex:2147483647,launcher:!0,headerHeight:44,cornerRadius:14,gap:16};function a(){var e=o.position;return":root{--ttcu-chat-width:"+o.width+"px;--ttcu-chat-height:"+o.height+"px;--ttcu-chat-radius:"+o.cornerRadius+"px;--ttcu-chat-shadow:0 12px 32px rgba(0,0,0,.22);--ttcu-chat-border:1px solid rgba(0,0,0,.08);--ttcu-gap:"+o.gap+"px;--ttcu-header-h:"+o.headerHeight+"px}#ttcuChatLauncher{position:fixed;"+e+":var(--ttcu-gap);bottom:var(--ttcu-gap);width:56px;height:56px;border:0;border-radius:50%;background:#0f6cf2;color:#fff;box-shadow:var(--ttcu-chat-shadow);cursor:pointer;z-index:"+(o.zIndex-1)+";display:flex;align-items:center;justify-content:center;font-size:22px}#ttcuChatPanel{position:fixed;"+e+":var(--ttcu-gap);bottom:calc(var(--ttcu-gap) + 64px);width:var(--ttcu-chat-width);height:var(--ttcu-chat-height);max-width:min(95vw,"+o.maxWidth+"px);max-height:min(80vh,"+o.maxHeight+"px);background:#fff;border:var(--ttcu-chat-border);border-radius:var(--ttcu-chat-radius);box-shadow:var(--ttcu-chat-shadow);overflow:hidden;transform:translateY(16px);opacity:0;pointer-events:none;transition:transform .2s ease,opacity .2s ease;z-index:"+o.zIndex+"}#ttcuChatPanel.open{transform:translateY(0);opacity:1;pointer-events:auto}#ttcuChatHeader{height:var(--ttcu-header-h);display:flex;align-items:center;justify-content:space-between;padding:0 10px 0 12px;border-bottom:1px solid rgba(0,0,0,.06);background:linear-gradient(0deg,#fff,#fafafa);font:600 14px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#1f2937}#ttcuChatHeader .actions{display:flex;gap:4px}#ttcuChatHeader button{width:28px;height:28px;border:0;border-radius:8px;background:transparent;cursor:pointer;font-size:16px;color:#4b5563}#ttcuChatHeader button:hover{background:rgba(15,108,242,.08);color:#0f6cf2}#ttcuChatFrame{width:100%;height:calc(100% - var(--ttcu-header-h));border:0;display:block;background:#fff}@media (max-width:640px){#ttcuChatLauncher{"+e+":max(var(--ttcu-gap),env(safe-area-inset-"+e+"));bottom:max(var(--ttcu-gap),env(safe-area-inset-bottom))}#ttcuChatPanel{"+e+":max(var(--ttcu-gap),env(safe-area-inset-"+e+"));"+("right"===e?"left:max(var(--ttcu-gap),env(safe-area-inset-left));":"right:max(var(--ttcu-gap),env(safe-area-inset-right));")+"width:auto;height:min(75vh,"+o.maxHeight+"px);bottom:calc(max(var(--ttcu-gap),env(safe-area-inset-bottom)) + 64px)}}" }function i(t){return document.getElementById(t)}function r(){if(!i("ttcu-chat-styles")){var e=document.createElement("style");e.id="ttcu-chat-styles",e.textContent=a(),document.head.appendChild(e)}}function d(){if(!n.built){if(r(),o.launcher&&!i("ttcuChatLauncher")){var t=document.createElement("button");t.id="ttcuChatLauncher",t.title="Chat",t.setAttribute("aria-label","Open chat"),t.innerHTML='<svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20 2H4a2 2 0 0 0-2 2v18l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z"/></svg>',t.addEventListener("click",p),document.body.appendChild(t)}if(!i("ttcuChatPanel")){var a=document.createElement("div");a.id="ttcuChatPanel",a.setAttribute("role","dialog"),a.setAttribute("aria-modal","false");var r=document.createElement("div");r.id="ttcuChatHeader",r.innerHTML='<div id="ttcuChatTitle"></div><div class="actions"><button id="ttcuChatMin" title="Minimize" aria-label="Minimize">▾</button><button id="ttcuChatClose" title="Close" aria-label="Close">✕</button></div>';var d=document.createElement("iframe");d.id="ttcuChatFrame",d.src=n.url,a.appendChild(r),a.appendChild(d),document.body.appendChild(a),document.getElementById("ttcuChatTitle").textContent=o.title,i("ttcuChatClose").addEventListener("click",c),i("ttcuChatMin").addEventListener("click",p),document.addEventListener("keydown",(function(e){"Escape"===e.key&&c()}))}n.built=!0}}function l(){d();var t=i("ttcuChatPanel");t&&(t.classList.add("open"),n.open=!0)}function c(){var t=i("ttcuChatPanel");t&&(t.classList.remove("open"),n.open=!1)}function p(){n.built&&n.open?c():l()}function s(t){n.url=t;var o=i("ttcuChatFrame");o&&(o.src=t)}(function(){var a=t();Object.assign(o,a),n.url=a.url;})(),window.ttcuChat={open:l,close:c,toggle:p,setUrl:s,isOpen:function(){return!!n.open}},document.addEventListener("chat.desktop.clicked",(function(){p()}));var h=window.__ttcuChatConfig||{};h.eager&&d(),h.url&&s(h.url)}();
